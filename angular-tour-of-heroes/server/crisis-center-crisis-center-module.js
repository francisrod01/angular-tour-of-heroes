exports.ids=[1],exports.modules={"4yGZ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CrisisCenterModule",(function(){return CrisisCenterModule}));var fesm2015_forms=__webpack_require__("3Pt+"),common=__webpack_require__("ofXK"),router=__webpack_require__("tyNb"),core=__webpack_require__("fXoL");class CrisisCenterHomeComponent{constructor(){}ngOnInit(){}}CrisisCenterHomeComponent.\u0275fac=function CrisisCenterHomeComponent_Factory(t){return new(t||CrisisCenterHomeComponent)},CrisisCenterHomeComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:CrisisCenterHomeComponent,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function CrisisCenterHomeComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"p"),core["\u0275\u0275text"](1,"Welcome to the Crisis Center"),core["\u0275\u0275elementEnd"]())},styles:[""]});var switchMap=__webpack_require__("eIep"),fesm2015_http=__webpack_require__("tk/3"),of=__webpack_require__("LRne"),tap=__webpack_require__("vkgz"),catchError=__webpack_require__("JIr8"),map=__webpack_require__("lJxs"),message_service=__webpack_require__("OdHV");class crisis_service_CrisisService{constructor(http,messageService){this.http=http,this.messageService=messageService,this.crisesUrl="api/crises",this.httpOptions={headers:new fesm2015_http.HttpHeaders({"Content-Type":"application/json"})}}getCrises(){return this.http.get(this.crisesUrl).pipe(Object(tap.a)(_=>this.log("fetched crises")),Object(catchError.a)(this.handleError("getCrises",[])))}getCrisisNo404(id){const url=`${this.crisesUrl}/?id=${id}`;return this.http.get(url).pipe(Object(map.a)(crises=>crises[0]),Object(tap.a)(h=>{const outcome=h?"fetched":"did not find";this.log(`${outcome} crisis id=${id}`)}),Object(catchError.a)(this.handleError("getCrisis id="+id)))}getCrisis(id){const url=`${this.crisesUrl}/${id}`;return this.http.get(url).pipe(Object(tap.a)(_=>this.log("fetched crisis id="+id)),Object(catchError.a)(this.handleError("getCrisis id="+id)))}searchCrises(term){return term.trim()?this.http.get(`${this.crisesUrl}/?name=${term}`).pipe(Object(tap.a)(x=>x.length?this.log(`found crises matching "${term}"`):this.log(`no crises matching "${term}"`)),Object(catchError.a)(this.handleError("searchCrises",[]))):Object(of.a)([])}addCrisis(crisis){return this.http.post(this.crisesUrl,crisis,this.httpOptions).pipe(Object(tap.a)(newCrisis=>this.log("added crisis w/ id="+newCrisis.id)),Object(catchError.a)(this.handleError("addCrisis")))}deleteCrisis(crisis){const id="number"==typeof crisis?crisis:crisis.id,url=`${this.crisesUrl}/${id}`;return this.http.delete(url,this.httpOptions).pipe(Object(tap.a)(_=>this.log("deleted crisis id="+id)),Object(catchError.a)(this.handleError("deleteCrisis")))}updateCrisis(crisis){return this.http.put(this.crisesUrl,crisis,this.httpOptions).pipe(Object(tap.a)(_=>this.log("updated Crisis id="+crisis.id)),Object(catchError.a)(this.handleError("updateCrisis")))}handleError(operation="operation",result){return err=>(console.error(err),this.log(`${operation} failed: ${err.message}`),Object(of.a)(result))}log(message){this.messageService.add("CrisisService: "+message)}}crisis_service_CrisisService.\u0275fac=function CrisisService_Factory(t){return new(t||crisis_service_CrisisService)(core["\u0275\u0275inject"](fesm2015_http.HttpClient),core["\u0275\u0275inject"](message_service.a))},crisis_service_CrisisService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:crisis_service_CrisisService,factory:crisis_service_CrisisService.\u0275fac,providedIn:"root"});const _c0=function(a1){return["/crisis-center",a1]};function CrisisListComponent_li_1_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"li"),core["\u0275\u0275elementStart"](1,"a",3),core["\u0275\u0275elementStart"](2,"span",4),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](5,"button",5),core["\u0275\u0275listener"]("click",(function CrisisListComponent_li_1_Template_button_click_5_listener(){core["\u0275\u0275restoreView"](_r3);const crisis_r1=ctx.$implicit;return core["\u0275\u0275nextContext"]().delete(crisis_r1)})),core["\u0275\u0275text"](6,"x"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()}if(2&rf){const crisis_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275classProp"]("selected",crisis_r1.id===ctx_r0.selectedId),core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](5,_c0,crisis_r1.id)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](crisis_r1.id),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"](" ",crisis_r1.name," ")}}class crisis_list_component_CrisisListComponent{constructor(crisisService,route){this.crisisService=crisisService,this.route=route}ngOnInit(){this.getCrises()}getCrises(){this.crises$=this.route.paramMap.pipe(Object(switchMap.a)(params=>(this.selectedId=+params.get("id"),this.crisisService.getCrises())))}}crisis_list_component_CrisisListComponent.\u0275fac=function CrisisListComponent_Factory(t){return new(t||crisis_list_component_CrisisListComponent)(core["\u0275\u0275directiveInject"](crisis_service_CrisisService),core["\u0275\u0275directiveInject"](router.a))},crisis_list_component_CrisisListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:crisis_list_component_CrisisListComponent,selectors:[["app-crisis-list"]],decls:7,vars:3,consts:[[1,"crises"],[3,"selected",4,"ngFor","ngForOf"],["routerLink","/sidekicks"],[3,"routerLink"],[1,"badge"],["title","delete crisis",1,"delete",3,"click"]],template:function CrisisListComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"ul",0),core["\u0275\u0275template"](1,CrisisListComponent_li_1_Template,7,7,"li",1),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275element"](3,"router-outlet"),core["\u0275\u0275elementStart"](4,"p"),core["\u0275\u0275elementStart"](5,"button",2),core["\u0275\u0275text"](6,"Go to sidekicks"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](2,1,ctx.crises$)))},directives:[common.i,router.g,router.c,router.e],pipes:[common.b],styles:[".crises[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:24em}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-color:#eee;margin:.5em;padding:.3em 0;height:1.6em;border-radius:4px}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#607d8b;background-color:#ddd;left:.1em}.crises[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#cfd8dc;color:#fff}.crises[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#bbd8dc}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#888;text-decoration:none;position:relative;display:block}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}.crises[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;min-width:16px;text-align:right;margin-right:.8em;border-radius:4px 0 0 4px}button[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;cursor:hand;font-family:Arial}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button.delete[_ngcontent-%COMP%]{position:relative;left:340px;top:-32px;background-color:grey!important;color:#fff}"]});class CrisisCenterComponent{constructor(){}ngOnInit(){}}CrisisCenterComponent.\u0275fac=function CrisisCenterComponent_Factory(t){return new(t||CrisisCenterComponent)},CrisisCenterComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:CrisisCenterComponent,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function CrisisCenterComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"h2"),core["\u0275\u0275text"](1,"CRISIS CENTER"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275element"](2,"router-outlet"))},directives:[router.g],styles:[""]});class dialog_service_DialogService{confirm(message){const confirmation=window.confirm(message||"Is it OK?");return Object(of.a)(confirmation)}}function CrisisDetailComponent_div_0_Template(rf,ctx){if(1&rf){const _r2=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275elementStart"](1,"h3"),core["\u0275\u0275text"](2),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](3,"div"),core["\u0275\u0275elementStart"](4,"span"),core["\u0275\u0275text"](5,"Id: "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](7,"div"),core["\u0275\u0275elementStart"](8,"label"),core["\u0275\u0275text"](9,"Name: "),core["\u0275\u0275elementStart"](10,"input",1),core["\u0275\u0275listener"]("ngModelChange",(function CrisisDetailComponent_div_0_Template_input_ngModelChange_10_listener($event){core["\u0275\u0275restoreView"](_r2);return core["\u0275\u0275nextContext"]().editName=$event})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](11,"button",2),core["\u0275\u0275listener"]("click",(function CrisisDetailComponent_div_0_Template_button_click_11_listener(){core["\u0275\u0275restoreView"](_r2);return core["\u0275\u0275nextContext"]().save()})),core["\u0275\u0275text"](12,"Save"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](13,"button",2),core["\u0275\u0275listener"]("click",(function CrisisDetailComponent_div_0_Template_button_click_13_listener(){core["\u0275\u0275restoreView"](_r2);return core["\u0275\u0275nextContext"]().cancel()})),core["\u0275\u0275text"](14,"Cancel"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"]('"',ctx_r0.editName,'"'),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](ctx_r0.crisis.id),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngModel",ctx_r0.editName)}}dialog_service_DialogService.\u0275fac=function DialogService_Factory(t){return new(t||dialog_service_DialogService)},dialog_service_DialogService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:dialog_service_DialogService,factory:dialog_service_DialogService.\u0275fac,providedIn:"root"});class CrisisDetailComponent{constructor(route,router,dialogService){this.route=route,this.router=router,this.dialogService=dialogService}ngOnInit(){this.getCrisis()}cancel(){this.goToCrises()}save(){this.crisis.name=this.editName,this.goToCrises()}canDeactivate(){return!this.crisis||this.crisis.name===this.editName||this.dialogService.confirm("Discard changes?")}getCrisis(){this.route.data.subscribe(data=>{this.editName=data.crisis.name,this.crisis=data.crisis})}goToCrises(){const crisisId=this.crisis?this.crisis.id:null;this.router.navigate(["../",{id:crisisId}],{relativeTo:this.route})}}CrisisDetailComponent.\u0275fac=function CrisisDetailComponent_Factory(t){return new(t||CrisisDetailComponent)(core["\u0275\u0275directiveInject"](router.a),core["\u0275\u0275directiveInject"](router.b),core["\u0275\u0275directiveInject"](dialog_service_DialogService))},CrisisDetailComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:CrisisDetailComponent,selectors:[["app-crisis-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],["placeholder","name",3,"ngModel","ngModelChange"],[3,"click"]],template:function CrisisDetailComponent_Template(rf,ctx){1&rf&&core["\u0275\u0275template"](0,CrisisDetailComponent_div_0_Template,15,3,"div",0),2&rf&&core["\u0275\u0275property"]("ngIf",ctx.crisis)},directives:[common.j,fesm2015_forms.a,fesm2015_forms.c,fesm2015_forms.d],styles:["label[_ngcontent-%COMP%]{display:inline-block;width:3em;margin:.5em 0;color:#607d8b;font-weight:700}input[_ngcontent-%COMP%]{height:2em;font-size:1em;padding-left:.4em}button[_ngcontent-%COMP%]{margin-top:20px;font-family:Arial;background-color:#eee;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}"]});class CanDeactivateGuard{canDeactivate(component){return!component.canDeactivate||component.canDeactivate()}}CanDeactivateGuard.\u0275fac=function CanDeactivateGuard_Factory(t){return new(t||CanDeactivateGuard)},CanDeactivateGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:CanDeactivateGuard,factory:CanDeactivateGuard.\u0275fac,providedIn:"root"});var empty=__webpack_require__("EY2u"),take=__webpack_require__("IzEk"),mergeMap=__webpack_require__("5+tZ");class crisis_detail_resolver_service_CrisisDetailResolverService{constructor(cs,router){this.cs=cs,this.router=router}resolve(route,state){const id=+route.paramMap.get("id");return this.cs.getCrisis(id).pipe(Object(take.a)(1),Object(mergeMap.b)(crisis=>crisis?Object(of.a)(crisis):(this.router.navigate(["/crisis-center"]),empty.a)))}}crisis_detail_resolver_service_CrisisDetailResolverService.\u0275fac=function CrisisDetailResolverService_Factory(t){return new(t||crisis_detail_resolver_service_CrisisDetailResolverService)(core["\u0275\u0275inject"](crisis_service_CrisisService),core["\u0275\u0275inject"](router.b))},crisis_detail_resolver_service_CrisisDetailResolverService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:crisis_detail_resolver_service_CrisisDetailResolverService,factory:crisis_detail_resolver_service_CrisisDetailResolverService.\u0275fac,providedIn:"root"});const crisisCenterRoutes=[{path:"",component:CrisisCenterComponent,children:[{path:"",component:crisis_list_component_CrisisListComponent,children:[{path:":id",component:CrisisDetailComponent,canDeactivate:[CanDeactivateGuard],resolve:{crisis:crisis_detail_resolver_service_CrisisDetailResolverService}},{path:"",component:CrisisCenterHomeComponent}]}]}];class CrisisCenterRoutingModule{}CrisisCenterRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CrisisCenterRoutingModule}),CrisisCenterRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({factory:function CrisisCenterRoutingModule_Factory(t){return new(t||CrisisCenterRoutingModule)},imports:[[router.f.forChild(crisisCenterRoutes)],router.f]});class CrisisCenterModule{}CrisisCenterModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CrisisCenterModule}),CrisisCenterModule.\u0275inj=core["\u0275\u0275defineInjector"]({factory:function CrisisCenterModule_Factory(t){return new(t||CrisisCenterModule)},imports:[[common.c,fesm2015_forms.b,CrisisCenterRoutingModule]]})}};